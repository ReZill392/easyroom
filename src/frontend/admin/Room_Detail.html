<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SC2-307</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f8f9fa;
      min-height: 100vh;
    }

    .header {
      background-color: #ff5722;
      color: white;
      padding: 10px 20px;
      display: flex;
      justify-content: flex-start;
      align-items: center;
    }

    .header h1 {
      font-size: 1.5em;
      margin: 0;
    }

    .container {
      display: flex;
      padding: 20px;
      gap: 20px;
    }

    .desks-section {
      flex: 3;
    }

    .legend {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 10px;
    }

    .legend .box {
      width: 20px;
      height: 20px;
    }

    .legend .red {
      background-color: red;
    }

    .legend .green {
      background-color: green;
    }

    /* ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ä‡πâ class ‡∏Ç‡∏≠‡∏á .usable computer ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
      /* Global select all container */
    #selectAllContainer {
      margin-bottom: 10px;
    }

    /* Grid ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ */
    .desk-grid {
      margin-top: 30px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .desk-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .desk-row .row-select {
      margin-right: 10px;
    }

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå (‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô) */
    .desk {
      width: 70px;
      height: 70px;
      border-radius: 4px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      color: black;
      /*background-color: green;*/
      /*‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå*/
      font-size: 16px;
      text-align: center;
      border: 2px solid transparent;
      transition: 0.2s;
    }

    .desk .computer-icon {
      font-size: 28px;
    }

    .desk .computer-id {
      font-size: 14px;
    }

    /*.usable {
        background-color: green !important;
      }*/
    /*‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå*/

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢ */
    .damaged {
      background-color: red;
      cursor: pointer;
      /* ‡πÉ‡∏´‡πâ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ */
      opacity: 0.6;
      /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏™‡∏µ‡∏¢ ‡πÅ‡∏ï‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ */
    }

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ */
    .usable {
      background-color: green;
      cursor: pointer;
      /* ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ */
    }

    /* ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ */
    /*.desk.selected {
  background-color: yellow;
  color: #000;
}*/

    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏¢‡∏∑‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå */
    .borrow-section {
      flex: 1;
      background-color: #dcd0bc;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #ccc;
      max-height: 400px;
      display: flex;
      flex-direction: column;
    }

    .borrow-section h3 {
      margin-top: 0;
      font-size: 20px;
    }

    .borrow-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .borrow-item label {
      font-size: 16px;
      flex: 1;
    }

    .borrow-item input[type="number"] {
      width: 50px;
      padding: 5px;
      font-size: 16px;
      text-align: center;
    }

    .borrow-item button {
      font-size: 16px;
      padding: 5px 10px;
      margin: 0 5px;
      cursor: pointer;
    }

    .confirm-button {
      background-color: #e54715;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
      align-self: flex-end;
      margin-top: auto;
    }

    .confirm-button:hover {
      background-color: #bf3c12;
    }

    .logout-btn {
      background-color: #ff6347;
      border: none;
      padding: 8px 12px;
      color: white;
      cursor: pointer;
      border-radius: 4px;
      font-size: 14px;
      margin-left: auto;
      /* ‚úÖ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î */
    }

    /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á checkbox */
    input[type="checkbox"] {
      width: 20px;
      /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
      height: 20px;
      /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á */
      transform: scale(1.5);
      /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
    }

    .desk-segment {
      display: flex;
      gap: 10px;
    }
  </style>
</head>

<body>
  <div class="header">
    <a href="#" id="back-btn" style="text-decoration: none; color: white" onclick="goBack()">&#8592;</a>
    >
    <h1 id="roomTitle">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</h1>
    <h1>‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå</h1>
    <button id="logout-btn" class="logout-btn" onclick="logout()">
      ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
    </button>
  </div>

  <div class="container">
    <div class="desks-section">
      <div class="legend">
        <div class="box red"></div>
        ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÉ‡∏ä‡πâ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
        <!-- <div class="box green"></div>
          ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ -->
      </div>

      <div class="desk-grid" id="deskGrid">
      </div>
    </div>
    <div class="borrow-section">
      <h3>‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á</h3>
      <div id="equipmentContainer"></div>
    </div>
  </div>
  <script src="script/Room_Detail.js" defer></script>
  <script src="script/URLroom.js"></script>
  <script src="../script/config.js"></script>
  <script src="../script/auth.js"></script>
  <script src="script/goBack.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ roomId ‡∏à‡∏≤‡∏Å URL
      const urlParams = new URLSearchParams(window.location.search);
      const roomId = urlParams.get("room");
      console.log("üîç ‡∏Ñ‡πà‡∏≤ roomId ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡πÑ‡∏î‡πâ:", roomId); // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ

      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ roomId ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á API
      if (!roomId) {
        console.error("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö roomId ‡πÉ‡∏ô URL");
        return;
      }

      // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏à‡∏≤‡∏Å API ‡∏ï‡∏≤‡∏° roomId
      fetch(`${API_URL}/admin/getEquipments?room=${roomId}`)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          if (data.error) {
            throw new Error(data.error);
          }
          console.log("üì¶ ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤:", data);

          // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏°‡∏≤‡πÉ‡∏ô #equipmentContainer
          const equipmentContainer = document.getElementById("equipmentContainer");
          equipmentContainer.innerHTML = ""; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

          data.forEach((equipment) => {
            const itemContainer = document.createElement("div");
            itemContainer.classList.add("borrow-item");

            const label = document.createElement("label");
            label.textContent = `${equipment.equipment_name} (‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${equipment.stock_quantity} ‡∏ä‡∏¥‡πâ‡∏ô)`;
            itemContainer.appendChild(label);

            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
            equipmentContainer.appendChild(itemContainer);
          });
        })
        .catch(error => {
          console.error("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå:", error);
        });
    });
  </script>
</body>

</html>